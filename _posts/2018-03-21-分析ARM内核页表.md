
### 1._AT(pmdval_t, 3)分析

#define PMD_TYPE_MASK		(_AT(pmdval_t, 3) << 0)

#define _AT(T,X)	((T)(X))

typedef u32 pteval_t;
typedef u32 pmdval_t;



<pre>


static void __init alloc_init_pud(pgd_t *pgd, unsigned long addr,                                                                                            │
   │765                                       unsigned long end, phys_addr_t phys,                                                                                       │
   │766                                       const struct mem_type *type)                                                                                               │
   │767     {                                                                                                                                                            │
   │768             pud_t *pud = pud_offset(pgd, addr);                                                                                                                  │
   │769             unsigned long next;                                                                                                                                  │
   │770                                                                                                                                                                  │
   │771             do {                                                                                                                                                 │
   │772                     next = pud_addr_end(addr, end);                                                                                                              │
   │773                     alloc_init_pmd(pud, addr, next, phys, type);                                                                                                 │
   │774                     phys += next - addr;                                                                                                                         │
   │775             } while (pud++, addr = next, addr != end);                                                                                                           │
  >│776     }          


        static inline pud_t * pud_offset(pgd_t * pgd, unsigned long address)                                                                                         │
        {                                                                                                                                                            │
                return (pud_t *)pgd;                                                                                                                                 │
        }
        
        
        
        static void __init __map_init_section(pmd_t *pmd, unsigned long addr,                                                                                        │
   │707                             unsigned long end, phys_addr_t phys,                                                                                                 │
   │708                             const struct mem_type *type)    
   
   

</pre>

### 2.SECTION_SIZE定义
   
/*
 * section address mask and size definitions.
 */
#define SECTION_SHIFT		20
#define SECTION_SIZE		(1UL << SECTION_SHIFT)    0x0010 0000
#define SECTION_MASK		(~(SECTION_SIZE-1))       0xfff0 0000

### 3.pgd_offset_k



